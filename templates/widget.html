{% extends 'base/base.html' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}

    {% from '_macro.html' import render_field %}

    <form>
        <div class="col-md-6">
            <div class="form-group">
                <label for="Name">Name</label>
                {{ render_field(form.name, class='form-control', id='Name') }}
            </div>
            <button type="button" class="btn btn-outline-success" onclick="getCode()">Save</button>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="code">Code</label>
                <div id="code"></div>
            </div>
        </div>
    </form>

    <style>
        body {
          {#height: 100vh;#}
          background: #F6F8F8;
          {#display: flex;#}
          justify-content: center;
          align-items: center;
        }

        #code {
          width: 400px;
          height: 83%;
          border-radius: 3px;
          box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
        }
        #code .codeflask {
          width: 400px;
          height: 400px;
          border-radius: 3px;
        }
        #code .codeflask::before, #code .codeflask .codeflask__lines {
          background: #FFF;
        }
    </style>

    <script>
        window.onload = function(){
            let codeArea = new CodeFlask('#code', {
              language: 'js',
              lineNumbers: true
            });

            {#codeArea.updateCode(code);#}

            codeArea.onUpdate( e => console.log(e));

            function get_code() {
                return codeArea.getCode()
            }
        };
    </script>


{% endblock %}